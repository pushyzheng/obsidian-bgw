---
{"dg-publish":true,"dg-permalink":"寻找峰值","permalink":"/寻找峰值/","title":"第一个错误的版本","tags":["二分查找"]}
---


## 思路

- 如果 mid **不是**错误版本：肯定是在 *[mid +1, right]*
- 如果 mid **是**错误版本：则 mid **也可能是目标答案**，所以要包含在区间中，即：*[left, mid]*

## 代码

由于 mid 本身也有可能是第一个错误版本，所以针对这种情况，在缩小边界的时候，需要使用 `right = mid`，而不是 `right = mid - 1`（这样会丢弃掉 mid）

```go
func firstBadVersion(n int) int {
	left, right := 1, n
	for left < right {
		mid := left + (right-left)/2
		if !isBadVersion(mid) {
			left = mid + 1
		} else {
			right = mid  // 丢弃 mid
		}
	}
	return left
}
```
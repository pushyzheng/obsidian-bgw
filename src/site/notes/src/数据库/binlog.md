---
{"dg-publish":true,"dg-permalink":"binlog","permalink":"/binlog/"}
---


#数据库 #MySQL 

binlog 以二进制格式保存到磁盘中，是 MySQL 的**逻辑**日志，记录数据库操作的逻辑事件，而非物理数据页的变更。

主要功能：
1. ==记录内容==
	- 所有修改数据的SQL语句（除了查询）
	- 包括事务的开始、提交和回滚信息，保证**事务安全性**
2. ==日志格式==
	- 支持三种格式
		- STATEMENT（基于语句）：记录 SQL 语句，日志量小，性能较好
		- ROW（基于行）：记录每行数据的**具体变更** （修改前后值），日志量大
		- MIXED（混合）：根据语句来选择上边两种
	- MySQL 5.7.7之后默认格式为 **ROW**
3. ==写入方式==
	- 以追加方式写入，文件大小可通过max_binlog_size参数控制
	- 达到大小后生成新文件

## 用途

- ==主从复制==：主库将binlog传递给从库，实现数据同步和备份
- ==数据恢复==：通过回放binlog中的操作，恢复误操作或宕机导致的数据丢失
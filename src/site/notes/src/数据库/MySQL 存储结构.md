---
{"dg-publish":true,"dg-permalink":"MySQL 存储结构","permalink":"/MySQL 存储结构/"}
---


## MySQL 的数据存放在哪个文件？

以 InnoDB 存储引擎为例：

- db.opt：数据库默认字符集和校验规则
- 表名.frm：存放**表结构**，保存每个表的元数据信息
- 表名.ibd：存放表数据，将存储的**数据、索引**等信息单独存储在一个独占表空间

## 表空间文件的结构是怎么样的?

MySQL 的数据是以行来存储的，但是数据库读取并**不是以【行】**为单位（一次读取效率很低）。

- ==行（row）==
	- 数据库表中的**记录**都是按行进行存放的
- ==页（page）==
	- 磁盘管理**最小**单位，以页为单位读写
	- 默认为**16kb**的连续存储空间
- ==区(extent)==
	- 由于B+ 树中每一层都是通过**双向链表**相连，为了保证相连页的物理位置连续，避免出现**随机 I/O**
	- 表数据量大时，连续 **64** 个页会化为一个区（共1MB），保证链表相邻的页物理位置相邻，可以使用顺序 I/O
- ==段(segment)==
	- 段由**多个区组成**
	- 数据段：存放[[src/数据库/B+树\|B+树]]的**叶子**节点的区的集合
	- 索引段：存放[[src/数据库/B+树\|B+树]]的**非叶子**节点的区的集合
	- 回滚段：存放的是**回滚数据**的区的集合，[[src/数据库/MySQL 锁#MVVC 多版本并发控制机制\|MVVC]]就是使用回滚段来实现多版本查询数据
---
{"dg-publish":true,"dg-permalink":"幻读","permalink":"/幻读/"}
---


在一个事务内多次查询某个符合查询条件的「**记录数量**」，如果出现前后两次查询到的记录数量不一样的情况，就意味着发生了「幻读」现象。 

假设有 A 和 B 这两个事务同时在处理：
1. 事务 A 先开始从数据库查询账户余额大于 100 万的记录，发现共有 5 条
2. 事务 B 也按相同的搜索条件也是查询出了 5 条记录
3. 事务 A 插入了一条余额超过 100 万的账号，并提交了事务，此时数据库超过 100 万余额的账号个数就变为 6

最后，事务 B 再次查询账户余额大于 100 万的记录，此时查询到的记录数量有 6 条，发现和前一次读到的记录数量不一样了，就感觉发生了幻觉一样，这种现象就被称为幻读：

![Pasted image 20250723193426.png](/img/user/attachments/images/Pasted%20image%2020250723193426.png)
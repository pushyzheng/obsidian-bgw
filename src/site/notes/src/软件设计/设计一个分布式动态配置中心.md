---
{"dg-publish":true,"dg-permalink":"设计一个分布式动态配置中心","permalink":"/设计一个分布式动态配置中心/"}
---


分布式动态配置中心作为系统必不可缺的中间件，最大的优势能够与代码不耦合，同时能够秒级地生效配置的变更，同时具备高可用的特性。业界有名的注入 [apollo](https://github.com/apolloconfig/apollo) 等。

## 变更

1. 轮询方案
	- Client 定期轮询拉取最新配置
	- 优点：实现**简单**
	- 缺点：如果轮询时间过短，对 Server 的**负载比较大**
2. 长连接方案
	- Client 与 Server 建立长连接，保证 Client 能秒级收到数据变更的推送
	- 补偿兜底机制：Client 定期拉取最新配置，防止推送机制失效导致变更不及时
	- 优点：**及时性高**
	- 缺点：如果 Client 实例过多，Server 的**长连接数量大**，也存在一定负载，可能也会导致 Server 单机达到[[src/计算机基础/计算机网络基础#服务器的最大并发连接数是多少?\|文件描述符的上限]]以及内存开销
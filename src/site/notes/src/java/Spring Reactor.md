---
{"dg-publish":true,"dg-permalink":"Spring Reactor","permalink":"/Spring Reactor/"}
---


#Java #Java框架 

## 响应式编程

- 基于**数据流**和变化传递的**声明式**编程规范，通过**函数式编程**的概念来操作数据流：
	- 事件驱动：生产者和消费者模型，以异步非阻塞的方式传递数据
	- 实时响应：程序发起执行后，**快速返回**存储结果的上下文对象（Mono/Flux），而不是阻塞
- 形象来说：将发布者和订阅者之间通信的方式**抽象为管道**，数据为管道中的元素。

## Reactor

Reactor 是实现 JDK9 中提出的 *Reactive Programming* 响应式编程的规范（*Reactive Streams API*）：
1. 本质上是一种**观察者模式**的延伸
	- 不同于传统命令编程模式（如迭代器模式）同步**拉取**数据的方式
	- 而是采用数据发布**推送**数据流的方式
2. 提升代码的可读性
	- 结合**函数式编程**和丰富的操作符
	- 屏蔽并发实现的复杂细节（高层次的**并发抽象**，即数据流和函数式）：`parallel`、`runOn`、`collectList`
	- 提供数据流的**有序性**：`map`、`flatmap`、`onNext` 等
3. 生态丰富
	- 很好地和 *Spring、Resilience4j* 等框架结合
4. 高级特性
	- **背压**机制：解决发布者速率高于订阅端消费问题

## Reactor 缺点

1. 前期学习会有可能有陡峭的学习曲线，需要摆脱原先**命令式的惯性思维**
	- 阅读官方文档，了解各个操作符的含义
	- 尝试通过 demo 来理解
2. Debug 可能会比较麻烦
	- 可以通过 `Hooks.onOperatorDebug()` 来展示数据传递的日志
		- 全局的 Hook，性能可能会有所影响
	- 使用 `checkpoint`
	- 使用 `log`，可以详细看到各个操作符的过程

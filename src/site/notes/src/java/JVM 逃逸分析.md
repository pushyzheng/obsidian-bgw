---
{"dg-publish":true,"dg-permalink":"jvm 逃逸分析","permalink":"/jvm 逃逸分析/"}
---


#Java #JVM 

## 什么是逃逸分析？

逃逸分析（*Escape Analysis*）是 JVM 的一种优化技术，用来判断一个对象有没有可能逃出一个**方法**或线程的作用域。

1. 全局逃逸：逃出了**方法**和**线程**
2. 参数逃逸：传递给了其他**方法**
3. 没有逃逸：其他方法或线程都无法访问到该对象

## 逃逸分析都有哪些优化？

如果确定一个对象**不会**发生逃逸或参数逃逸，则可以为这个对象**做不同程度的优化**，从而提高 JVM 性能。例如：
1. ==栈上分配==
	- 一个对象不会逃逸出方法，在栈上分配对象的内存
	- 可以提高 JVM 性能：
		- 在方法调用**结束后**即可销毁
		- 不需要 JVM 触发垃圾回收器来回收
2. ==标量替换==
	- 对**聚合量**（对象）进行拆分
	- 直接使用**标量**（基本数据类型）进行替换
3. ==同步消除==
	- 如果一个对象不会发生线程层面的逃逸，即这个对象不会被其他线程所访问到
	- 那么对这个对象的同步操作，就会被消除为**没有同步**的操作，如 *synchronized* 操作
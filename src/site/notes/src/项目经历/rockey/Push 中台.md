---
{"dg-publish":true,"dg-permalink":"Push 中台","permalink":"/Push 中台/"}
---


#项目 

## 背景

- 背景：统一维护并同时降低新业务接入成本
	- 各业务独自对接不同厂商推送渠道
	- 功能实现简单：如推送流量削峰、重试补偿、过期设备 Token 检测等
	- 缺少统一的打点统计功能
- 目标
	- 公司所有业务线统一接入

## 方案

主要的实现细节：
- 使用 Sharding JDBC 来进行分库分表：
	- 分库：隔离不同业务的数据库，防止相互影响
	- 分表：减少单表数量，增加查询效率
	- 使用 Hint 算法灵活可配，针对不同业务的量级执行不同的策略
- [[src/项目经历/rockey/Push All 方案实现\|实现全量推送]]
	- 难题：
		- **可恢复**：保证一次任务被触发后，不能被打断
		- **不可重复**：只能由一个结点来完成推送的 MQ 入队，防止重复推送，影响体验
	- 实现流程
		- 任务创建：
		- 抢占任务：
		- 保护机制：
		- 任务延续：
- 设计多渠道多设备的发送

## Q&A

### 为什么需要 Push 中台（存在的价值）？

- 渠道屏蔽：（不论是前期直接对接渠道还是后期自研，业务方都无需变动）  
- 降低业务接入成本：（业务无需重复对接）  
- 额外能力：**推送到达率优化**（重试、探测）、数据分析、运营能力（定时、延迟、批量） 整体架构

### 怎么制定去规范、定义接口?

### 作为中台，如何了解清楚业务的需求？

### 如何解决推送过程中的重复、漏推等问题
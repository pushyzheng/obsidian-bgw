---
{"dg-publish":true,"dg-permalink":"搜索整体架构&流程","permalink":"/搜索整体架构&流程/"}
---


架构图：

<style> .container {font-family: sans-serif; text-align: center;} .button-wrapper button {z-index: 1;height: 40px; width: 100px; margin: 10px;padding: 5px;} .excalidraw .App-menu_top .buttonList { display: flex;} .excalidraw-wrapper { height: 800px; margin: 50px; position: relative;} :root[dir="ltr"] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left {transform: none;} </style><script src="https://cdn.jsdelivr.net/npm/react@17/umd/react.production.min.js"></script><script src="https://cdn.jsdelivr.net/npm/react-dom@17/umd/react-dom.production.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@excalidraw/excalidraw@0/dist/excalidraw.production.min.js"></script><div id="Drawing_2025-07-08_1015.55.excalidraw.md1"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/2.13.0","elements":[{"id":"AJ95CTKOlv9u1peV2lcHq","type":"rectangle","x":-206.01887893676758,"y":-316.11328125,"width":148.69146728515625,"height":71.94009399414062,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a0","roundness":{"type":3},"seed":331179352,"version":597,"versionNonce":1190184,"isDeleted":false,"boundElements":[{"type":"text","id":"8sjlw1u5"},{"id":"NjAXDvy92cEBvGCr5J1pH","type":"arrow"}],"updated":1751941278210,"link":null,"locked":false},{"id":"8sjlw1u5","type":"text","x":-152.96313095092773,"y":-292.6432342529297,"width":42.57997131347656,"height":25,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a1","roundness":null,"seed":1315753512,"version":197,"versionNonce":665321256,"isDeleted":false,"boundElements":[],"updated":1751941278211,"link":null,"locked":false,"text":"BFE","rawText":"BFE","fontSize":20,"fontFamily":5,"textAlign":"center","verticalAlign":"middle","containerId":"AJ95CTKOlv9u1peV2lcHq","originalText":"BFE","autoResize":true,"lineHeight":1.25},{"id":"OLhaR6Pe9VneRn3I7MTpL","type":"rectangle","x":-204.9978265726815,"y":-188.8737030029297,"width":148.69146728515625,"height":71.94009399414062,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a2","roundness":{"type":3},"seed":10265176,"version":858,"versionNonce":1616797016,"isDeleted":false,"boundElements":[{"type":"text","id":"D5Z48zlL"},{"id":"hd1l1KzLoowPcs1fJLY9a","type":"arrow"},{"id":"NjAXDvy92cEBvGCr5J1pH","type":"arrow"}],"updated":1751941278210,"link":null,"locked":false},{"id":"D5Z48zlL","type":"text","x":-180.65209293010338,"y":-177.90365600585938,"width":100,"height":50,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a3","roundness":null,"seed":109483864,"version":499,"versionNonce":1135467048,"isDeleted":false,"boundElements":[],"updated":1751941278211,"link":null,"locked":false,"text":"BFF\n搜索接入层","rawText":"BFF\n搜索接入层","fontSize":20,"fontFamily":5,"textAlign":"center","verticalAlign":"middle","containerId":"OLhaR6Pe9VneRn3I7MTpL","originalText":"BFF\n搜索接入层","autoResize":true,"lineHeight":1.25},{"id":"T0BFYrz8E8iErwGqiCNk3","type":"rectangle","x":-204.10478591918945,"y":-63.30507373454668,"width":148.69146728515625,"height":71.94009399414062,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"#ffec99","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a4","roundness":{"type":3},"seed":1559906904,"version":932,"versionNonce":1424396376,"isDeleted":false,"boundElements":[{"type":"text","id":"h4mZWs9u"},{"id":"voiqu34FN5c6zq-I7tptr","type":"arrow"}],"updated":1751941332445,"link":null,"locked":false},{"id":"h4mZWs9u","type":"text","x":-179.75905227661133,"y":-52.33502673747637,"width":100,"height":50,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a5","roundness":null,"seed":1492074328,"version":549,"versionNonce":1573953112,"isDeleted":false,"boundElements":[],"updated":1751941219078,"link":null,"locked":false,"text":"VUI\n搜索展现层","rawText":"VUI\n搜索展现层","fontSize":20,"fontFamily":5,"textAlign":"center","verticalAlign":"middle","containerId":"T0BFYrz8E8iErwGqiCNk3","originalText":"VUI\n搜索展现层","autoResize":true,"lineHeight":1.25},{"id":"NjAXDvy92cEBvGCr5J1pH","type":"arrow","x":-126.11111417709358,"y":-242.9231719970703,"width":1.2600590519804484,"height":53.049468994140625,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a6","roundness":{"type":2},"seed":869873240,"version":663,"versionNonce":859515688,"isDeleted":false,"boundElements":[],"updated":1751941278213,"link":null,"locked":false,"points":[[0,0],[1.2600590519804484,53.049468994140625]],"lastCommittedPoint":null,"startBinding":{"elementId":"AJ95CTKOlv9u1peV2lcHq","focus":-0.06220682798603423,"gap":1.2500152587890625},"endBinding":{"elementId":"OLhaR6Pe9VneRn3I7MTpL","focus":0.0888088618310053,"gap":1},"startArrowhead":null,"endArrowhead":"arrow","elbowed":false},{"id":"hd1l1KzLoowPcs1fJLY9a","type":"arrow","x":-127.88776505009932,"y":-115.93360900878906,"width":0.7254742382307597,"height":51.79298400878906,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a7","roundness":{"type":2},"seed":280367704,"version":480,"versionNonce":181104680,"isDeleted":false,"boundElements":[],"updated":1751941278212,"link":null,"locked":false,"points":[[0,0],[-0.7254742382307597,51.79298400878906]],"lastCommittedPoint":null,"startBinding":{"elementId":"OLhaR6Pe9VneRn3I7MTpL","focus":-0.04385027559334594,"gap":1},"endBinding":null,"startArrowhead":null,"endArrowhead":"arrow","elbowed":false},{"id":"KbPqjSWjXvailYgfzqvS5","type":"rectangle","x":-203.91378116252525,"y":70.38734436035156,"width":148.69146728515625,"height":71.94009399414062,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a8","roundness":{"type":3},"seed":1401070424,"version":1045,"versionNonce":1472055592,"isDeleted":false,"boundElements":[{"type":"text","id":"2kQpMwmI"}],"updated":1751941227299,"link":null,"locked":false},{"id":"2kQpMwmI","type":"text","x":-169.56804751994713,"y":81.35739135742188,"width":80,"height":50,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a9","roundness":null,"seed":1862563928,"version":689,"versionNonce":1563437864,"isDeleted":false,"boundElements":[],"updated":1751941232006,"link":null,"locked":false,"text":"US\n统一搜索","rawText":"US\n统一搜索","fontSize":20,"fontFamily":5,"textAlign":"center","verticalAlign":"middle","containerId":"KbPqjSWjXvailYgfzqvS5","originalText":"US\n统一搜索","autoResize":true,"lineHeight":1.25},{"id":"voiqu34FN5c6zq-I7tptr","type":"arrow","x":-126.85672015074802,"y":12.052973750804881,"width":2.1829717743008104,"height":64.382542606617,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aA","roundness":{"type":2},"seed":184309544,"version":444,"versionNonce":631873832,"isDeleted":false,"boundElements":[],"updated":1751941268957,"link":null,"locked":false,"points":[[0,0],[-2.1829717743008104,64.382542606617]],"lastCommittedPoint":null,"startBinding":{"elementId":"T0BFYrz8E8iErwGqiCNk3","focus":-0.05608169084701131,"gap":3.4179534912109375},"endBinding":null,"startArrowhead":null,"endArrowhead":"arrow","elbowed":false},{"id":"IHKcnG-Ppu1GuAS8I6Mwc","type":"rectangle","x":40.21162033081055,"y":-63.37237548828125,"width":148.69146728515625,"height":71.94009399414062,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aB","roundness":{"type":3},"seed":1987667288,"version":986,"versionNonce":537096536,"isDeleted":false,"boundElements":[{"type":"text","id":"hq7cODDF"}],"updated":1751941129969,"link":null,"locked":false},{"id":"hq7cODDF","type":"text","x":78.0673713684082,"y":-52.40232849121094,"width":72.97996520996094,"height":50,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aC","roundness":null,"seed":1238563416,"version":637,"versionNonce":583614040,"isDeleted":false,"boundElements":[],"updated":1751941226427,"link":null,"locked":false,"text":"NodeUI\n渲染","rawText":"NodeUI\n渲染","fontSize":20,"fontFamily":5,"textAlign":"center","verticalAlign":"middle","containerId":"IHKcnG-Ppu1GuAS8I6Mwc","originalText":"NodeUI\n渲染","autoResize":true,"lineHeight":1.25},{"id":"gkpWsEPj8jrxTra2mH1Og","type":"arrow","x":-55.57942581176758,"y":-24.003890991210938,"width":98.15106201171875,"height":2.024749755859375,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aD","roundness":{"type":2},"seed":405736792,"version":115,"versionNonce":111737688,"isDeleted":false,"boundElements":[],"updated":1751941129969,"link":null,"locked":false,"points":[[0,0],[98.15106201171875,-2.024749755859375]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null,"startArrowhead":null,"endArrowhead":"arrow","elbowed":false},{"id":"dZMbNJ7DQ-1OH0jr7GTQS","type":"rectangle","x":-203.57426834106445,"y":216.7903289794922,"width":148.69146728515625,"height":71.94009399414062,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aE","roundness":{"type":3},"seed":970217768,"version":1193,"versionNonce":817820504,"isDeleted":false,"boundElements":[{"type":"text","id":"XzsFvUkK"},{"id":"Ho2QNKnSg4sLZOmei8i6L","type":"arrow"}],"updated":1751941187451,"link":null,"locked":false},{"id":"XzsFvUkK","type":"text","x":-169.22853469848633,"y":227.7603759765625,"width":80,"height":50,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aF","roundness":null,"seed":1128199208,"version":829,"versionNonce":1775132456,"isDeleted":false,"boundElements":[],"updated":1751941236944,"link":null,"locked":false,"text":"AC\n高级搜索","rawText":"AC\n高级搜索","fontSize":20,"fontFamily":5,"textAlign":"center","verticalAlign":"middle","containerId":"dZMbNJ7DQ-1OH0jr7GTQS","originalText":"AC\n高级搜索","autoResize":true,"lineHeight":1.25},{"id":"_9sGqY3Ikjb3gCT2p-e-h","type":"arrow","x":-130.01301956176758,"y":140.84637451171875,"width":0.48504638671875,"height":76.5006103515625,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aG","roundness":{"type":2},"seed":1962384984,"version":71,"versionNonce":434332712,"isDeleted":false,"boundElements":[],"updated":1751941139688,"link":null,"locked":false,"points":[[0,0],[0.48504638671875,76.5006103515625]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null,"startArrowhead":null,"endArrowhead":"arrow","elbowed":false},{"id":"mf7X0xd4mekc1fSeFW1l3","type":"rectangle","x":5.266857147216797,"y":212.9524383544922,"width":148.69146728515625,"height":71.94009399414062,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aH","roundness":{"type":3},"seed":1578897448,"version":1440,"versionNonce":1326526760,"isDeleted":false,"boundElements":[{"type":"text","id":"5q2CgPU4"},{"id":"IOAySVIejeToKcNcdmQXo","type":"arrow"}],"updated":1751941152758,"link":null,"locked":false},{"id":"5q2CgPU4","type":"text","x":29.612590789794922,"y":223.9224853515625,"width":100,"height":50,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aI","roundness":null,"seed":326617896,"version":1091,"versionNonce":1057517352,"isDeleted":false,"boundElements":[],"updated":1751941246174,"link":null,"locked":false,"text":"AlaRoot\n阿拉丁入口","rawText":"AlaRoot\n阿拉丁入口","fontSize":20,"fontFamily":5,"textAlign":"center","verticalAlign":"middle","containerId":"mf7X0xd4mekc1fSeFW1l3","originalText":"AlaRoot\n阿拉丁入口","autoResize":true,"lineHeight":1.25},{"id":"IOAySVIejeToKcNcdmQXo","type":"arrow","x":-125.69984817504883,"y":142.22332763671875,"width":215.7486572265626,"height":68.55139160156247,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aJ","roundness":{"type":2},"seed":2005781288,"version":101,"versionNonce":2009167656,"isDeleted":false,"boundElements":[],"updated":1751941268965,"link":null,"locked":false,"points":[[0,0],[215.7486572265626,68.55139160156247]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"mf7X0xd4mekc1fSeFW1l3","focus":0.6957884095277208,"gap":2.1777191162109375},"startArrowhead":null,"endArrowhead":"arrow","elbowed":false},{"id":"pJTfRkDaAnCweoblNwec6","type":"rectangle","x":-201.27929295491606,"y":365.46691755861394,"width":148.69146728515625,"height":71.94009399414062,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aK","roundness":{"type":3},"seed":859757656,"version":1335,"versionNonce":1224728664,"isDeleted":false,"boundElements":[{"type":"text","id":"fUZLq9sY"}],"updated":1751941188430,"link":null,"locked":false},{"id":"fUZLq9sY","type":"text","x":-166.93355931233793,"y":376.43696455568426,"width":80,"height":50,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aL","roundness":null,"seed":1557238104,"version":967,"versionNonce":764439384,"isDeleted":false,"boundElements":[],"updated":1751941239740,"link":null,"locked":false,"text":"BC\n基础搜索","rawText":"BC\n基础搜索","fontSize":20,"fontFamily":5,"textAlign":"center","verticalAlign":"middle","containerId":"pJTfRkDaAnCweoblNwec6","originalText":"BC\n基础搜索","autoResize":true,"lineHeight":1.25},{"id":"Ho2QNKnSg4sLZOmei8i6L","type":"arrow","x":-126.61519886797333,"y":292.36722477387906,"width":3.1645487343556056,"height":71.98484231231686,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aM","roundness":{"type":2},"seed":741824296,"version":41,"versionNonce":355154984,"isDeleted":false,"boundElements":[],"updated":1751941268958,"link":null,"locked":false,"points":[[0,0],[-3.1645487343556056,71.98484231231686]],"lastCommittedPoint":null,"startBinding":{"elementId":"dZMbNJ7DQ-1OH0jr7GTQS","focus":-0.05735119009178363,"gap":3.6368018002462463},"endBinding":null,"startArrowhead":null,"endArrowhead":"arrow","elbowed":false},{"id":"Fc1bqJrInIXC-aVAoEQ-k","type":"rectangle","x":7.6685236540560595,"y":365.78803106341576,"width":148.69146728515625,"height":71.94009399414062,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aN","roundness":{"type":3},"seed":1595532328,"version":1445,"versionNonce":1793978200,"isDeleted":false,"boundElements":[{"type":"text","id":"s1P6dneU"},{"id":"Aml-gG2LIODuJhNyBL0dV","type":"arrow"}],"updated":1751941205295,"link":null,"locked":false},{"id":"s1P6dneU","type":"text","x":55.56427560718106,"y":376.75807806048607,"width":52.89996337890625,"height":50,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aO","roundness":null,"seed":1570447144,"version":1075,"versionNonce":149939240,"isDeleted":false,"boundElements":[],"updated":1751941249243,"link":null,"locked":false,"text":"DISP\n展现","rawText":"DISP\n展现","fontSize":20,"fontFamily":5,"textAlign":"center","verticalAlign":"middle","containerId":"Fc1bqJrInIXC-aVAoEQ-k","originalText":"DISP\n展现","autoResize":true,"lineHeight":1.25},{"id":"Aml-gG2LIODuJhNyBL0dV","type":"arrow","x":-124.62610934162058,"y":287.60542552534434,"width":208.56363396515593,"height":77.18260553807141,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aP","roundness":{"type":2},"seed":1563700264,"version":77,"versionNonce":1104695848,"isDeleted":false,"boundElements":[],"updated":1751941268970,"link":null,"locked":false,"points":[[0,0],[208.56363396515593,77.18260553807141]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"Fc1bqJrInIXC-aVAoEQ-k","focus":0.5935730357699854,"gap":1},"startArrowhead":null,"endArrowhead":"arrow","elbowed":false},{"id":"bdWdEaxruJg8Z5FO_ihey","type":"freedraw","x":99.66634717262559,"y":-142.10958925110845,"width":79.5539330938933,"height":72.9407859544979,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aQ","roundness":null,"seed":77470760,"version":72,"versionNonce":1479557976,"isDeleted":true,"boundElements":null,"updated":1751941302814,"link":null,"locked":false,"points":[[0,0],[-4.893693592093086,0.7054078724517012],[-5.955223228610748,1.7635037842556187],[-7.610151365666525,3.0013297498283578],[-9.424556939429294,5.266745526622799],[-11.842535012882081,8.162949250838807],[-12.55134481630023,9.573733201994884],[-15.6408704212771,18.319986438588188],[-16.180092376331118,23.68847195673058],[-16.705706607519232,28.39224559902911],[-16.705706607519232,33.09601924132764],[-15.661218419581019,37.79980878049986],[-11.567837035779121,46.040748093587894],[-8.28506903440973,50.083195894135315],[-6.219747206561692,51.32105365345544],[-2.838545763396951,52.769131670252904],[0.5425920922730256,53.732291452470065],[5.246349837697835,54.776811434155576],[9.95017117061741,54.776811434155576],[15.318608998138757,54.776811434155576],[21.348420358032286,54.22741547994971],[26.716921773048398,53.152373500808324],[28.782243600896322,52.32487763853308],[33.486001346321245,50.75467983816472],[38.189759091746055,49.18451383154371],[45.12842651338315,45.22682816143106],[47.8448842869567,43.866898309161115],[52.39266190788305,40.69261057374942],[54.04428349521436,39.0376347460726],[54.240959616320765,38.6374627450534],[56.38430330016536,33.84889517857275],[57.34739949488778,30.464355391936294],[57.5983793364677,29.70469148963204],[58.12062343043681,24.997515916367064],[59.16517520586967,20.29035623997575],[59.701027023704455,14.918484687740602],[60.05368326930932,13.504298805618077],[60.05368326930932,9.458433177230546],[60.53529495416524,6.07387749372046],[60.53529495416524,3.3540336860542084],[60.33518510834506,2.953861685035008],[59.01936908052312,1.132715836834052],[58.619149388882875,0.7325279389411605],[56.55045742381583,-0.5086999575980258],[53.65086766550701,-2.441759796470535],[51.58217570043996,-3.269239761872086],[46.74609237854486,-5.955175537989675],[40.607800752693606,-8.746237339719642],[37.887972841901046,-9.655125195210559],[31.095111545610507,-12.486882993548363],[28.375283634817947,-13.39575495216559],[21.677358468114107,-15.07107877814633],[14.236794950811827,-17.09909064347923],[8.864923398576707,-17.638312598533133],[4.157731928438011,-18.16397452034232],[-1.3022718914509142,-18.16397452034232],[-6.762339298834718,-18.16397452034232],[-10.906527090901704,-17.43144658140116],[-12.975282643463515,-17.02110058123],[-15.043974608530561,-16.610738684185122],[-16.658270336473265,-16.06134272997926],[-17.258536286438925,-15.467864745072802],[-18.018152498122163,-15.216900800366545],[-18.21826234394223,-15.020208782386533],[-18.618418448087823,-14.62342281546006],[-18.81852829390789,-14.426730797480047],[-19.01863813972807,-14.230022882626372],[-19.01863813972807,-14.03333086464636],[-19.01863813972807,-13.836638846666347],[-19.01863813972807,-13.836638846666347]],"pressures":[],"simulatePressure":true,"lastCommittedPoint":[-19.01863813972807,-13.836638846666347]},{"id":"aq7V8OOXiO9rWZ4QqD4WG","type":"freedraw","x":-151.86543386129495,"y":-25.915746867533528,"width":0.0001,"height":0.0001,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aR","roundness":null,"seed":466630952,"version":4,"versionNonce":132328536,"isDeleted":true,"boundElements":null,"updated":1751941307987,"link":null,"locked":false,"points":[[0,0],[0.0001,0.0001]],"pressures":[],"simulatePressure":true,"lastCommittedPoint":[0.0001,0.0001]},{"id":"FyW2SEy8pQGWHBdNt48OD","type":"freedraw","x":-109.86716536200186,"y":-19.492551471679974,"width":0.0001,"height":0.0001,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"aS","roundness":null,"seed":1035960360,"version":4,"versionNonce":497317208,"isDeleted":true,"boundElements":null,"updated":1751941310696,"link":null,"locked":false,"points":[[0,0],[0.0001,0.0001]],"pressures":[],"simulatePressure":true,"lastCommittedPoint":[0.0001,0.0001]}],"appState":{"theme":"light","viewBackgroundColor":"#f8f9fa","currentItemStrokeColor":"#1e1e1e","currentItemBackgroundColor":"#ffec99","currentItemFillStyle":"solid","currentItemStrokeWidth":2,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":5,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemArrowType":"round","scrollX":640.9465310860311,"scrollY":243.92418315674533,"zoom":{"value":0.959861},"currentItemRoundness":"round","gridSize":20,"gridStep":5,"gridModeEnabled":false,"gridColor":{"Bold":"rgba(203, 211, 218, 0.5)","Regular":"rgba(218, 224, 229, 0.5)"},"currentStrokeOptions":null,"frameRendering":{"enabled":true,"clip":true,"name":true,"outline":true},"objectsSnapModeEnabled":false,"activeTool":{"type":"selection","customType":null,"locked":false,"fromSelection":false,"lastActiveTool":null}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("Drawing_2025-07-08_1015.55.excalidraw.md1");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

[[src/项目经历/baidu/大搜模块划分图\|大搜模块划分图]]

模块：
- ==接入层==
	- BFE（Baidu Front End）：负责应用层负载均衡、流量转发、防攻击等
- ==检索前端==（最靠近业务，负责向后端获取检索数据、页面渲染）
	- BFF（接入模块）：公共参数解析、抽样、降级、容灾 Cache
	- [[src/项目经历/baidu/搜索整体架构&流程#VUI 模块的主要功能有？\|VUI（展现模块）]]：模板管理与选择、将召回结果适配为模板展现数据
		- search-ugio：结果页搜索
		- vsearch：垂搜
		- sf-ui：落地页
	- NodeUI（渲染模块）：渲染为 HTML，通过**多进程异步**渲染机制提高渲染效率
	- [[src/项目经历/baidu/搜索整体架构&流程#US 模块的定位和主要功能？\|US（通用搜索模块）]]：请求分发、结果整合
	- [[src/项目经历/baidu/搜索整体架构&流程#什么是阿拉丁？\|AlaRoot（阿拉丁模块）]]：满足用户**需求闭环**产品，垂直搜索等
- ==检索后端==（负责最核心的召回、归并、排序、摘要计算等）
	- DA（数据分析）：query 相关性分析
	- AC（高级检索）：查询 BC、相关性排序等
	- DISP（Display）：管理网页的只要数据
	- BC（基础搜索）：访问索引库，从倒排索引中检索期望的 URL
- ==检索存储==
	- Index（倒排索引库）：
		- 实时库/小时库/天库/周库
		- vip/se/dadu
		- 贴吧库/知道库/文库/学术库

## query 变换

为什么需要对 query 进行变换？
1. 为了满足用户**多样的需求**：识别出隐藏在原 query 之下的用户的**真实需求**，并对 query 进行改写
2. 为了资源消耗和相关性的折中：在满足用户的前提下，尽可能少的消耗资源（资源不足以检索无限多的网页）

示例：
1. **地域**扩展变换：北京用户搜索”天气“ → ”北京天气“
2. **关联** query 变换：“curry” → “stephen curry”
3. **纠错** query 变换：“厦门理工大学” → “厦门理工学院”
4. 其他变换

## query 需求识别

为 US 提供服务，进行需求的分析和识别：
1. 分析出 query 的**垂搜**分类：视频、图片等
2. 是否为**阿拉丁**
3. **扩展**搜索：对用户输入的 query 进行拼音扩展查询，给出与用户查询语音相关的检索词提示用户
4. **相关**搜索：提供与检索词语义相关的内容提示给用户，达到增加流量的目的
5. **时效性**：按照突发性 → 长周期的优先级，判断 query 的时效性（不同时间段搜索奥运会）

## 系统缓存

- bff：容灾缓存，对页面渲染后的 HTML 数据做缓存，目的在于提高服务的可用性、提升系统的容灾能力
- US：对 AC 的返回的数据结果做缓存，加快检索的速度
- AC：对 BC 的返回的数据结果做缓存，加快检索的速度

## 索引分层

由于网页质量参差不齐，如果优质网页能满足，则不需要低质网页参与检索消耗性能，所以会对索引进行分层：
1. 按照网页质量**分层三层**（类似于漏斗、金字塔）：越上层质量越好
2. 每个层级再按照时效性、产品资源划分不同库种

![Pasted image 20250709152455.png](/img/user/attachments/images/Pasted%20image%2020250709152455.png)


## VUI 模块的主要功能有？

1. [[src/项目经历/baidu/VUI#模板选择\|模板选择]]
    - 根据计费名（流量来源的标识，不同端——PC/H5/手百）获取不同的模板，根据模板生成页面
        - 例如手百的结果页是没有搜索框的
    - 模板可以理解为 Structure
2. ==展现策略==
	- 适配前端模板需要的数据结构和格式，或做一些格式化的操作
	- 通过请求异步摘要服务（例如互动中台），补充一些实时性的数据
	- PK 业务：收拢顶部产品、底部产品等 PK 逻辑
	- 点出业务
3. ==展现日志==
    - 记录一次用户请求中展现给用户页面的详细数据信息，包括：模板名、结果数、单条结果详细信息
    - 主要给下游模块用来做报表生成和统计分析
4. ==速度相关==
    - [[src/项目经历/baidu/Instant Search\|Instant Search]]：即时搜索模式，提前获取结果页面，在合适时机给用户展示
    - [[src/项目经历/baidu/COOK 机制\|COOK 机制]]：加快首屏加载速度，提升用户体验

## US 模块的定位和主要功能？

> [!NOTE] 
> US 是垂类检索资源整合入口，主要负责整合多种后端服务的结果，并进行排序、合并和位置调整，最终结果传递到前端展现模块。

1. 通过DA（Data Analyzer）模块分析 query 的查询需求
2. 分发到不同后端服务：自然结果的-AC、特殊资源 Aladdin、视频资源等等
3. 将多个后端结果进行整合、去重、排序和位置调整（点击调权、特殊权重等等），并将结果限制在 10 条

## 什么是阿拉丁？

阿拉丁结果一般位于百度 A 页的首位，是满足用户搜索需求闭环的卡片式产品。如用户搜索 1+1 时，首位展现的**计算器卡片**。

作用：
1. 为了更好调度**垂搜**和**特殊库**资源
2. 解决现有搜索引擎无法检索到的**暗网数据**（爬虫无法爬取到的数据，如火车车次的列车时刻等）
3. 为用户提供个性化、高质量内容展示

包含：
1. K-V 配置（PM/运营 配置）特定 query 下优质资源的特型展示
2. 自有产品：贴吧、词典、百科、阅读
3. 特定需求：汇率换算、列车时刻、计算器
4. 接入暗网数据提供的简易接口
